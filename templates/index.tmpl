<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid ASCII</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://unpkg.com/htmx.org@1.7.0"></script>
    <script src="https://unpkg.com/hyperscript.org@0.9.12"></script>
    <script src="/static/script.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Mermaid ASCII <small>v{{ .Version }}</small></h1>
            <div class="header-actions">
                <button id="theme-toggle" class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 01.818.162z"/>
                    </svg>
                    <span id="theme-toggle-text">Dark</span>
                </button>
                <a href="https://github.com/AlexanderGrooff/mermaid-ascii" class="github-link" target="_blank" rel="noopener noreferrer">
                    <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub">
                    <span>View on GitHub</span>
                </a>
            </div>
        </header>

        <div class="toolbar">
            <div class="toolbar-section">
                <div class="toolbar-group">
                    <label for="xPadding">xPadding:</label>
                    <div class="slider-container">
                        <input
                            type="range" id="xPadding" name="xPadding" min="3" max="10" value="5"
                            form="mermaid-form"
                            hx-post="/"
                            hx-target="#result-code"
                            hx-swap="innerHTML"
                            hx-trigger="change delay:200ms"
                            hx-include="#mermaid-form, [form='mermaid-form']"
                        >
                        <span class="slider-value">5</span>
                    </div>
                </div>

                <div class="toolbar-group">
                    <label for="yPadding">yPadding:</label>
                    <div class="slider-container">
                        <input
                            type="range" id="yPadding" name="yPadding" min="3" max="10" value="3"
                            form="mermaid-form"
                            hx-post="/"
                            hx-target="#result-code"
                            hx-swap="innerHTML"
                            hx-trigger="change delay:200ms"
                            hx-include="#mermaid-form, [form='mermaid-form']"
                        >
                        <span class="slider-value">3</span>
                    </div>
                </div>

                <div class="toolbar-group">
                    <label for="useExtendedChars">Use extended characters:</label>
                    <input
                        type="checkbox" id="useExtendedChars" name="useExtendedChars" checked
                        form="mermaid-form"
                        hx-post="/"
                        hx-target="#result-code"
                        hx-swap="innerHTML"
                        hx-trigger="change"
                        hx-include="#mermaid-form, [form='mermaid-form']"
                    >
                </div>
            </div>

            <div class="example-buttons">
                <button type="button" class="example-button" style="background-color: #28a745; color: white;" onclick="setExample('graph LR\nsubgraph Frontend\n    UI --> API\nend\nsubgraph Backend\n    API --> Database\n    API --> Cache\nend')">Example 1: Nested Subgraphs</button>
                <button type="button" class="example-button" style="background-color: #20c997; color: white;" onclick="setExample('graph TD\nA -->|labelled arrow| B\nA --> Example2')">Example 2: Labelled Arrow</button>
                <button type="button" class="example-button" style="background-color: #007bff; color: white;" onclick="setExample('graph LR\nclassDef examplecolor color:#ff00ff\nA --> B\nA --> ColorText:::examplecolor\nB --> D\nColorText --> D')">Example 3: Styled Text</button>
                <button type="button" class="example-button" style="background-color: #6f42c1; color: white;" onclick="setExample('sequenceDiagram\n    participant A\n    participant B\n    participant C\n    A->>B: First\n    B->>C: Second\n    A->>C: Direct')">Example 4: Sequence Diagram</button>
            </div>
        </div>

        <div class="main-content">
            <div class="editor-pane">
                <div class="pane-header">
                    <h2 class="pane-title">Mermaid Code</h2>
                </div>
                <form id="mermaid-form" hx-post="/" hx-target="#result-code" hx-swap="innerHTML">
                    <textarea
                        name="mermaid"
                        placeholder="graph LR&#10;A --> B"
                        hx-post="/"
                        hx-target="#result-code"
                        hx-swap="innerHTML"
                        hx-trigger="keyup changed delay:200ms, changed"
                        hx-include="#mermaid-form, [form='mermaid-form']"
                    ></textarea>
                </form>
            </div>

            <div class="preview-pane">
                <div class="pane-header">
                    <h2 class="pane-title">ASCII Output</h2>
                    <button class="copy-button" _="on click
                        writeText(my nextElementSibling.querySelector('code').innerText) on navigator.clipboard
                        put 'Copied!' into me
                        wait 2s
                        put 'Copy' into me
                    ">Copy</button>
                </div>
                <div class="result-container">
                    <pre class="code-block"><code id="result-code"><!-- Result content goes here --></code></pre>
                </div>
            </div>
        </div>

        <div class="instructions-section">
            <h2>Alternative Usage Methods</h2>
            <p>There are alternative forms of generating mermaid graphs in ASCII using this same Git repository.</p>

            <div class="instruction-block">
                <h3>cURL Request</h3>
                <div class="code-example">
                    <button class="copy-button" _="on click
                        writeText(my nextElementSibling.innerText) on navigator.clipboard
                        put 'Copied!' into me
                        wait 2s
                        put 'Copy' into me
                    ">Copy</button>
                    <pre><code>curl https://mermaid-ascii.art -d mermaid="graph LR\nABC --> DEF"</code></pre>
                </div>
            </div>

            <div class="instruction-block">
                <h3>Run Golang in CLI</h3>
                <div class="code-example">
                    <button class="copy-button" _="on click
                        writeText(my nextElementSibling.innerText) on navigator.clipboard
                        put 'Copied!' into me
                        wait 2s
                        put 'Copy' into me
                    ">Copy</button>
                    <pre><code>git clone https://github.com/AlexanderGrooff/mermaid-ascii
cd mermaid-ascii
go run main.go -f test.mermaid</code></pre>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
